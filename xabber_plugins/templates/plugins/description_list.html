{% extends 'base.html' %}

{% block breadcrumbs %}
    <div>
        <a href="{% url 'plugins:plugin_list' %}">Plugin list</a>
        >
        <a href="{% url 'plugins:plugin_detail' plugin_name=plugin.name %}">
            {{ plugin.display_name }}
        </a>
        >
        <div>
            Description list
        </div>
    </div>
{% endblock %}

{% block content %}
    {% if plugin.descriptions.exists %}
        <div>
            {% for description in plugin.descriptions.all %}
                <div>
                    <form method="POST" action="{% url 'plugins:change_description' plugin_name=plugin.name plugin_description_id=description.id %}">
                        {% csrf_token %}
                        <div>
                            Language: {{ description.get_language_display }}
                        </div>
                        <div>
                            Description: {{ description.description }}
                        </div>
                        <textarea name="description"></textarea>
                        <div>
                            Default: {{ description.default }}
                        </div>
                        <input type="checkbox" name="default">

                        <button>Change</button>
                    </form>
                    <a href="{% url 'plugins:delete_description' plugin_name=plugin.name description_id=description.id %}">Delete</a>
                </div>

            {% endfor %}
        </div>
    {% endif %}

    <div>
        Add description
        <form action="{% url 'plugins:add_description' plugin_name=plugin.name %}" method="POST">
            {% csrf_token %}
            <select name="language" id="">
                {% for choice in plugin_description_form.language.field.choices %}
                    <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                {% endfor %}
            </select>
            <input type="checkbox" name="default">
            <textarea name="description" placeholder="Plugin description"></textarea>

            <button>Submit</button>
        </form>
    </div>

    <div>
        <a href="{% url 'plugins:plugin_delete' plugin_name=plugin.name %}">Delete Plugin</a>
    </div>
{% endblock %}